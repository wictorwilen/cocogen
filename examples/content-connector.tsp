import "@wictorwilen/cocogen";
using coco;

@coco.connection({
  contentCategory: "crm",
  name: "Ticket connector",
  connectionId: "ticketsconnector",
  connectionDescription: "Ticket connector generated by cocogen"
})
@doc("Ticket records synchronized into Microsoft 365 Copilot.")
@coco.item()
model Ticket {
  @coco.id
  @coco.schemaDescription("Stable identifier for the ticket (unique within the source system).")
  @doc("Ticket ID in the source system.")
  @example("TCK-1001")
  @pattern("^TCK-[0-9]+$")
  @coco.search({ queryable: true, retrievable: true })
  @coco.source("Ticket ID")
  ticketId: string;

  @coco.label("title")
  @coco.schemaDescription("Short title shown in search results.")
  @doc("One-line title for the ticket.")
  @example("Password reset not working")
  @minLength(4)
  @maxLength(120)
  @coco.search({ searchable: true, retrievable: true })
  title: string;

  @coco.schemaDescription("Current state of the ticket (used for filtering/refiners).")
  @example("open")
  @coco.search({ retrievable: true, refinable: true })
  status: string;

  @coco.label("url")
  @coco.schemaDescription("Canonical link to the ticket in the source system.")
  @format("uri")
  @example("https://support.contoso.com/tickets/TCK-1001")
  @coco.search({ retrievable: true })
  url: string;

  @coco.content({ type: "text" })
  @coco.source("title")
  @coco.source("url")
  @coco.source("ticketId", "ticket identifier")
  body: string;

  #deprecated "Legacy note field is no longer used."
  legacyNote: string;

  @coco.label("createdDateTime")
  @coco.schemaDescription("Timestamp when the ticket was created in the source system.")
  @coco.search({ retrievable: true })
  createdAt: utcDateTime;
}
