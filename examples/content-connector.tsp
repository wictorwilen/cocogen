import "@wictorwilen/cocogen";
using coco;

@coco.connection({
  contentCategory: "crm",
  name: "Ticket connector",
  connectionId: "ticketsconnector",
  connectionDescription: "Ticket connector generated by cocogen"
})
@TypeSpec.doc("Ticket records synchronized into Microsoft 365 Copilot.")
@coco.item()
model Ticket {
  @coco.id
  @coco.description("Stable identifier for the ticket (unique within the source system).")
  @TypeSpec.doc("Ticket ID in the source system.")
  @TypeSpec.example("TCK-1001")
  @TypeSpec.pattern("^TCK-[0-9]+$")
  @coco.search({ queryable: true, retrievable: true })
  @coco.source("Ticket ID")
  ticketId: string;

  @coco.label("title")
  @coco.description("Short title shown in search results.")
  @TypeSpec.doc("One-line title for the ticket.")
  @TypeSpec.example("Password reset not working")
  @TypeSpec.minLength(4)
  @TypeSpec.maxLength(120)
  @coco.search({ searchable: true, retrievable: true })
  title: string;

  @coco.description("Current state of the ticket (used for filtering/refiners).")
  @TypeSpec.example("open")
  @coco.search({ retrievable: true, refinable: true })
  status: string;

  @coco.label("url")
  @coco.description("Canonical link to the ticket in the source system.")
  @TypeSpec.format("uri")
  @TypeSpec.example("https://support.contoso.com/tickets/TCK-1001")
  @coco.search({ retrievable: true })
  url: string;

  @coco.content({ type: "text" })
  body: string;

  #deprecated "Legacy note field is no longer used."
  legacyNote: string;

  @coco.label("createdDateTime")
  @coco.description("Timestamp when the ticket was created in the source system.")
  @coco.search({ retrievable: true })
  createdAt: utcDateTime;
}
