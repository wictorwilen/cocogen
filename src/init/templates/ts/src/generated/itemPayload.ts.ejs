import type { Item } from "./model.js";
import { contentPropertyName, idPropertyName } from "./constants.js";

export function getItemId(item: Item): string {
  return String((item as any)[idPropertyName] ?? "");
}

export function toExternalItem(item: Item): {
  acl: Array<{ type: string; value: string; accessType: string }>;
  properties: Record<string, unknown>;
  content?: { type: string; value: string };
} {
  const properties = {
<%- propertiesObjectLines %>
  };

  return {
    acl: [{ type: "everyone", value: "everyone", accessType: "grant" }],
    properties<%- contentBlock %>
  };
}
