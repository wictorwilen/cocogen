// Property transforms for custom mapping logic.
// For explicit @coco.source mappings, the function receives the source column value.
// When no @coco.source is provided, the function receives the full row.

import {
  parseBoolean,
  parseNumber,
  parseNumberCollection,
  parseString,
  parseStringCollection,
  readSourceValue
} from "../datasource/csv.js";

<% for (const prop of properties) { -%>
export function transform<%= prop.transformName %>(<%= prop.isExplicitSource ? "value: unknown" : "row: Record<string, unknown>" %>): <%= prop.tsType %> {
  // TODO: customize mapping for <%= prop.name %>
  return <%- prop.isExplicitSource
    ? `${prop.parser}(value)`
    : `${prop.parser}(readSourceValue(row, ${JSON.stringify(prop.csvHeaders)}))`
  %>;
}

<% } -%>
