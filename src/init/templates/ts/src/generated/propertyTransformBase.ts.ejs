/**
 * Generated property transforms derived from TypeSpec.
 * Regenerated on every cocogen update.
 */

import {
  parseBoolean,
  parseNumber,
  parseNumberCollection,
  parseString,
  parseStringCollection,
  readSourceValue
} from "../datasource/row.js";
import {
  validateNumber,
  validateNumberCollection,
  validateString,
  validateStringCollection
} from "../core/validation.js";

/**
 * Base class for row-to-model transforms.
 */
export abstract class PropertyTransformBase {
  /**
   * Transform a property by name using the generated transform methods.
   */
  public transformProperty<T>(name: string, row: Record<string, unknown>): T {
    switch (name) {
<% for (const prop of properties) { -%>
      case <%= JSON.stringify(prop.name) %>:
        return this.transform<%= prop.transformName %>(row) as T;
<% } -%>
      default:
        throw new Error(`Unknown property '${name}'.`);
    }
  }

<% for (const prop of properties) { -%>
  /** Transform the <%= prop.name %> property from a source row. */
  protected transform<%= prop.transformName %>(row: Record<string, unknown>): <%= prop.tsType %> {
    return <%- prop.expression %>;
  }

<% } -%>
}
